import{d as q,E as b,n as B,D as k,f as t,o as n,w as a,a as o,k as v,u as s,i,b as p,p as H,R,s as F}from"./app-vTTCaS-4.js";import{_ as S,a as K,b as j,c as z,d as A,f as D,g as O,u as G,e as J}from"./MessageBox-DmbvQ0YX.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-DXjDl46i.js";import{_ as P}from"./index-DpwaDo9S.js";import{u as c}from"./usePasswordToggle-sLSTZwa6.js";import{g as Q}from"./generatePassword-DvCYLbGr.js";import{c as W}from"./createLucideIcon-C8QRG_X6.js";import{E as x,a as V}from"./eye-BNLZUCYj.js";import{L as X}from"./loader-circle-C3updWC_.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=W("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),Z={class:"grid gap-2"},ss={class:"relative"},es={class:"grid gap-2"},os={class:"relative"},ms=q({__name:"ChangePasswordForm",props:{UserId:{type:Number,required:!0}},setup($){const{isPasswordHidden:h,inputType:N,togglePassword:f}=c(),{isPasswordHidden:I,inputType:E,togglePassword:w}=c();c();const{openSuccessNotification:L,openErrorNotification:T}=G(),{randomPass:_}=Q(),U=$,m=b(!1),r=B({password:_.value,password_confirmation:_.value});let d=b(!1);const M=(async()=>{d.value=!0;try{const l=await R.patch(F("user-mgmt.resetPassword",U.UserId),r,{});d.value=!1,r.reset(),m.value=!1,L(`${l.data.message}`),J.emit("refresh-user-table"),console.log(l)}catch(l){return d.value=!1,T(l.response.data.message),l}});return(l,e)=>{const g=k("Label"),y=k("InputError");return n(),t(s(O),{open:m.value,"onUpdate:open":e[2]||(e[2]=u=>m.value=u)},{default:a(()=>[o(s(S),null,{default:a(()=>[o(s(P),{size:"sm",class:"text-xs button-submit"},{default:a(()=>[o(s(Y)),e[3]||(e[3]=i("Reset Password",-1))]),_:1})]),_:1}),m.value?(n(),t(s(K),{key:0},{default:a(()=>[p("form",{onSubmit:H(M,["prevent"]),class:"space-y-4"},[o(s(j),null,{default:a(()=>[o(s(z),null,{default:a(()=>[...e[4]||(e[4]=[i("Password Reset",-1)])]),_:1}),o(s(A),null,{default:a(()=>[...e[5]||(e[5]=[i(" Reset user password here. Click save when you're done. ",-1)])]),_:1})]),_:1}),p("div",Z,[o(g,{for:"password"},{default:a(()=>[...e[6]||(e[6]=[i("New password",-1)])]),_:1}),p("div",ss,[o(s(C),{id:"password",type:s(N),required:"",tabindex:2,autocomplete:"password",modelValue:s(r).password,"onUpdate:modelValue":e[0]||(e[0]=u=>s(r).password=u),placeholder:"New Password"},null,8,["type","modelValue"]),s(h)?(n(),t(s(x),{key:0,onClick:s(f),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(V),{key:1,onClick:s(f),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(y,{message:s(r).errors.password},null,8,["message"])]),p("div",es,[o(g,{for:"password"},{default:a(()=>[...e[7]||(e[7]=[i("Confirm password",-1)])]),_:1}),p("div",os,[o(s(C),{id:"password_confirmation",type:s(E),required:"",tabindex:2,autocomplete:"password_confirmation",modelValue:s(r).password_confirmation,"onUpdate:modelValue":e[1]||(e[1]=u=>s(r).password_confirmation=u),placeholder:"Confirm Password"},null,8,["type","modelValue"]),s(I)?(n(),t(s(x),{key:0,onClick:s(w),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(V),{key:1,onClick:s(w),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(y,{message:s(r).errors.password_confirmation},null,8,["message"])]),o(s(D),null,{default:a(()=>[o(s(P),{type:"submit",class:"bg-blue-500 cursor-pointer hover:bg-blue-700",disabled:s(d)},{default:a(()=>[s(d)?(n(),t(s(X),{key:0,class:"h-4 w-4 animate-spin"})):v("",!0),e[8]||(e[8]=i(" Update Password ",-1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})):v("",!0)]),_:1},8,["open"])}}});export{ms as _};
