import{d as L,E as M,n as B,D as v,f as t,o as n,w as r,a as o,k as R,u as s,i,b as d,p as S,R as F,s as K}from"./app-BR9OuUoH.js";import{_ as j,a as z,b as A,c as D,d as O,f as G,C as J,g as Q,u as W,e as X}from"./MessageBox-D2AM_am_.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-DS8Iohfv.js";import{_ as x}from"./index-DmL20AiG.js";import{u as w}from"./usePasswordToggle-JolTLoIS.js";import{g as Y}from"./generatePassword-CvH1jVzn.js";import{c as Z}from"./createLucideIcon-Dd4E5md2.js";import{E as g,a as _}from"./eye-fAkK0BHr.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Z("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),es={class:"grid gap-2"},os={class:"relative"},rs={class:"grid gap-2"},as={class:"relative"},ts={class:"grid gap-2"},ns={class:"relative"},ws=L({__name:"ChangePasswordForm",props:{UserId:{type:Number,required:!0}},setup(V){const{isPasswordHidden:h,inputType:$,togglePassword:y}=w(),{isPasswordHidden:I,inputType:N,togglePassword:C}=w(),{isPasswordHidden:T,inputType:E,togglePassword:k}=w(),{openSuccessNotification:U,openErrorNotification:H}=W(),{randomPass:P}=Y(),q=V,p=M(!1),a=B({current_password:"",password:P.value,password_confirmation:P.value}),b=(async()=>{try{const u=await F.patch(K("user-mgmt.resetPassword",q.UserId),a,{});a.reset(),p.value=!1,U(`${u.data.message}`),X.emit("refresh-user-table"),console.log(u)}catch(u){return H(u.response.data.message),u}});return(u,e)=>{const c=v("Label"),m=v("InputError");return n(),t(s(Q),{open:p.value,"onUpdate:open":e[3]||(e[3]=l=>p.value=l)},{default:r(()=>[o(s(j),null,{default:r(()=>[o(s(x),{size:"sm",class:"text-xs button-submit"},{default:r(()=>[o(s(ss)),e[4]||(e[4]=i("Reset Password",-1))]),_:1})]),_:1}),p.value?(n(),t(s(z),{key:0},{default:r(()=>[o(s(A),null,{default:r(()=>[o(s(D),null,{default:r(()=>[...e[5]||(e[5]=[i("Password Reset",-1)])]),_:1}),o(s(O),null,{default:r(()=>[...e[6]||(e[6]=[i(" Reset user password here. Click save when you're done. ",-1)])]),_:1})]),_:1}),d("form",{onSubmit:S(b,["prevent"]),class:"space-y-4"},[d("div",es,[o(c,{for:"current_password"},{default:r(()=>[...e[7]||(e[7]=[i("Current password",-1)])]),_:1}),d("div",os,[o(s(f),{id:"current_password",type:s(E),required:"",tabindex:2,autocomplete:"current_password",modelValue:s(a).current_password,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).current_password=l),placeholder:"Current Password"},null,8,["type","modelValue"]),s(T)?(n(),t(s(g),{key:0,onClick:s(k),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(k),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.current_password},null,8,["message"])]),d("div",rs,[o(c,{for:"password"},{default:r(()=>[...e[8]||(e[8]=[i("New password",-1)])]),_:1}),d("div",as,[o(s(f),{id:"password",type:s($),required:"",tabindex:2,autocomplete:"password",modelValue:s(a).password,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).password=l),placeholder:"New Password"},null,8,["type","modelValue"]),s(h)?(n(),t(s(g),{key:0,onClick:s(y),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(y),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.password},null,8,["message"])]),d("div",ts,[o(c,{for:"password"},{default:r(()=>[...e[9]||(e[9]=[i("Confirm password",-1)])]),_:1}),d("div",ns,[o(s(f),{id:"password_confirmation",type:s(N),required:"",tabindex:2,autocomplete:"password_confirmation",modelValue:s(a).password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).password_confirmation=l),placeholder:"Confirm Password"},null,8,["type","modelValue"]),s(I)?(n(),t(s(g),{key:0,onClick:s(C),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(C),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.password_confirmation},null,8,["message"])])],32),o(s(G),null,{default:r(()=>[o(s(x),{onClick:b,class:"bg-blue-500 cursor-pointer hover:bg-blue-700"},{default:r(()=>[o(s(J)),e[10]||(e[10]=i("Update Password",-1))]),_:1})]),_:1})]),_:1})):R("",!0)]),_:1},8,["open"])}}});export{ws as _};
