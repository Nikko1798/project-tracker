import{d as q,E as L,n as M,D as P,f as t,o as n,w as r,a as o,k as B,u as s,i,b as d,p as R,R as S,s as F}from"./app-kMYB9bGM.js";import{_ as K,a as j,b as z,c as A,d as D,f as O,C as G,g as J,u as Q,e as W}from"./MessageBox-BrrqRZFd.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-BTxaK5T3.js";import{_ as v}from"./index-B7t04BrC.js";import{u as w}from"./usePasswordToggle-01swdRVz.js";import{c as X}from"./createLucideIcon-DXGgdmKd.js";import{E as g,a as _}from"./eye-dqj0YhYP.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=X("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),Z={class:"grid gap-2"},ss={class:"relative"},es={class:"grid gap-2"},os={class:"relative"},rs={class:"grid gap-2"},as={class:"relative"},cs=q({__name:"ChangePasswordForm",props:{UserId:{type:Number,required:!0}},setup(x){const{isPasswordHidden:V,inputType:h,togglePassword:y}=w(),{isPasswordHidden:$,inputType:I,togglePassword:C}=w(),{isPasswordHidden:N,inputType:T,togglePassword:k}=w(),{openSuccessNotification:E,openErrorNotification:U}=Q(),H=x,p=L(!1),a=M({current_password:"",password:"",password_confirmation:""}),b=(async()=>{try{const u=await S.patch(F("user-mgmt.resetPassword",H.UserId),a,{});a.reset(),p.value=!1,E(`${u.data.message}`),W.emit("refresh-user-table"),console.log(u)}catch(u){return U(u.response.data.message),u}});return(u,e)=>{const c=P("Label"),m=P("InputError");return n(),t(s(J),{open:p.value,"onUpdate:open":e[3]||(e[3]=l=>p.value=l)},{default:r(()=>[o(s(K),null,{default:r(()=>[o(s(v),{size:"sm",class:"text-xs button-submit"},{default:r(()=>[o(s(Y)),e[4]||(e[4]=i("Reset Password",-1))]),_:1})]),_:1}),p.value?(n(),t(s(j),{key:0},{default:r(()=>[o(s(z),null,{default:r(()=>[o(s(A),null,{default:r(()=>[...e[5]||(e[5]=[i("Password Reset",-1)])]),_:1}),o(s(D),null,{default:r(()=>[...e[6]||(e[6]=[i(" Reset user password here. Click save when you're done. ",-1)])]),_:1})]),_:1}),d("form",{onSubmit:R(b,["prevent"]),class:"space-y-4"},[d("div",Z,[o(c,{for:"current_password"},{default:r(()=>[...e[7]||(e[7]=[i("Current password",-1)])]),_:1}),d("div",ss,[o(s(f),{id:"current_password",type:s(T),required:"",tabindex:2,autocomplete:"current_password",modelValue:s(a).current_password,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).current_password=l),placeholder:"Current Password"},null,8,["type","modelValue"]),s(N)?(n(),t(s(g),{key:0,onClick:s(k),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(k),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.current_password},null,8,["message"])]),d("div",es,[o(c,{for:"password"},{default:r(()=>[...e[8]||(e[8]=[i("New password",-1)])]),_:1}),d("div",os,[o(s(f),{id:"password",type:s(h),required:"",tabindex:2,autocomplete:"password",modelValue:s(a).password,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).password=l),placeholder:"New Password"},null,8,["type","modelValue"]),s(V)?(n(),t(s(g),{key:0,onClick:s(y),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(y),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.password},null,8,["message"])]),d("div",rs,[o(c,{for:"password"},{default:r(()=>[...e[9]||(e[9]=[i("Confirm password",-1)])]),_:1}),d("div",as,[o(s(f),{id:"password_confirmation",type:s(I),required:"",tabindex:2,autocomplete:"password_confirmation",modelValue:s(a).password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).password_confirmation=l),placeholder:"Confirm Password"},null,8,["type","modelValue"]),s($)?(n(),t(s(g),{key:0,onClick:s(C),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"])):(n(),t(s(_),{key:1,onClick:s(C),class:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer text-gray-500"},null,8,["onClick"]))]),o(m,{message:s(a).errors.password_confirmation},null,8,["message"])])],32),o(s(O),null,{default:r(()=>[o(s(v),{onClick:b,class:"bg-blue-500 cursor-pointer hover:bg-blue-700"},{default:r(()=>[o(s(G)),e[10]||(e[10]=i("Update Password",-1))]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1},8,["open"])}}});export{cs as _};
